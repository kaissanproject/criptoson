{% extends "base.html" %}

{% block title %}Top 50 Criptomoedas | Crypto Tracker{% endblock %}

{% block content %}
<div class="container mx-auto">
    <h1 class="text-3xl font-bold mb-6 text-gray-900 dark:text-white">Top 50 Criptomoedas</h1>
    
    <!-- Barra de Busca -->
    <div class="mb-4">
        <input type="text" id="searchInput" placeholder="Buscar por nome ou símbolo..." class="w-full px-4 py-2 border rounded-lg bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-500">
    </div>

    <!-- Tabela de Moedas -->
    <div class="overflow-x-auto shadow-md rounded-lg">
        <table id="coinTable" class="w-full text-sm text-left text-gray-500 dark:text-gray-400 data-table">
            <thead class="text-xs text-gray-700 uppercase bg-gray-100 dark:bg-gray-700 dark:text-gray-400">
                <tr>
                    <th scope="col" class="px-6 py-3">#</th>
                    <th scope="col" class="px-6 py-3">Moeda</th>
                    <th scope="col" class="px-6 py-3 text-right">Preço</th>
                    <th scope="col" class="px-6 py-3 text-right">Variação 24h</th>
                    <th scope="col" class="px-6 py-3 text-right">Capitalização de Mercado</th>
                </tr>
            </thead>
            <tbody>
                {% for coin in coins %}
                <tr class="bg-white dark:bg-gray-800 border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 cursor-pointer coin-row" data-id="{{ coin.id }}">
                    <td class="px-6 py-4 font-medium text-gray-900 dark:text-white">{{ loop.index }}</td>
                    <th scope="row" class="px-6 py-4 font-medium text-gray-900 dark:text-white whitespace-nowrap">
                        <div class="flex items-center">
                            <img src="{{ coin.image }}" alt="{{ coin.name }}" class="w-6 h-6 mr-3 rounded-full">
                            <div>
                                {{ coin.name }}
                                <span class="text-gray-500 dark:text-gray-400">{{ coin.symbol | upper }}</span>
                            </div>
                        </div>
                    </th>
                    <td class="px-6 py-4 text-right price-cell" data-coin-id="{{ coin.id }}">
                        {{ "{:,.2f}".format(coin.current_price) }}
                    </td>
                    <td class="px-6 py-4 text-right change-cell {% if coin.price_change_percentage_24h > 0 %}price-up{% else %}price-down{% endif %}" data-coin-id="{{ coin.id }}">
                        {{ "%.2f"|format(coin.price_change_percentage_24h) }}%
                    </td>
                    <td class="px-6 py-4 text-right">
                        {{ "{:,.0f}".format(coin.market_cap).replace(',', '.') }}
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="5" class="text-center py-8">Nenhuma moeda encontrada ou falha ao carregar dados.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
